# Type Fighter – 開発要件（簡易版）

## これは何のアプリか（What）
- イベント会場向けの **2人対戦型タイピングゲーム**。
- プレイヤーは同じルームコードで入室し、**お題を素早く正確に打ち切ると相手にダメージ**。
- **HP100・ライフ2・最大3ラウンド（BO3）**で勝敗を決める。
- **和歌山イベント向け**に、背景はオレンジ基調のフレンドリーなUI。
- 試合結果は保存・集計され、**日次ランキング**などに活用できる。

## 使用技術（Tech Stack）
### フロントエンド
- React + Vite + TypeScript
- Zustand（状態管理）
- Tailwind CSS（UIスタイル）
- Framer Motion（アニメーション）
- howler.js（効果音）
- デプロイ：**Cloudflare Pages**（`web/dist` をCDN配信）

### リアルタイム
- **Cloudflare Workers + Durable Objects（生WebSocket）**
  - ルーム＝1 DOで状態（HP/ライフ/ラウンド/参加者）を一元管理
  - `join / ready / start / atk` を処理しクライアントへ broadcast

### 永続化・集計・認証
- **Supabase（Postgres）**
  - `words`：お題管理
  - `matches`：試合結果保存（終了時にinsert）
  - `leaderboard_daily`：ランキングビュー
- 認証：当面は **Basic認証（管理者限定モード）**

## ユーザーストーリー（User Story）
1. **管理者ログイン**  
   - ページにアクセスし、Basic認証で入場（管理者のみ有効化）。

2. **プレイヤー名入力**  
   - ニックネームを入れて「ルーム作成」または「ルームコードで参加」を選ぶ。

3. **マッチング**  
   - P1がルーム作成→コード発行。P2はコード入力で同室へ参加（満席・進行中は不可）。

4. **試合開始**  
   - 両者がREADY → カウントダウン → 同時スタート。  
   - お題は Supabase `words` から（難易度に応じて選定）。

5. **攻撃・ダメージ**  
   - 先にお題を打ち切った側が相手へ攻撃。  
   - 文字数・速度・精度・コンボを係数化してダメージ算出、HP更新を即時反映。

6. **勝敗**  
   - HP=0でライフ–1。ライフが尽きたら敗北（BO3）。  
   - 終了時に Supabase `matches` へ保存、ランキングに反映。

7. **再戦・終了**  
   - 結果画面から再戦または終了を選択できる。

